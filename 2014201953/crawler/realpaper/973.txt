Generating Bayes-Nash Equilibria to Design Autonomous Trading Agents

Ioannis A. Vetsikas and Nicholas R. Jennings

Bart Selman

ECS School, University of Southampton,

CS Dept., Cornell University,

Southampton SO17 1BJ, UK

{iv,nrj}@ecs.soton.ac.uk

Ithaca, NY 14853, USA
selman@cs.cornell.edu

Abstract

This paper presents a methodology for designing
trading agents for complex games. We compute,
for the ﬁrst time, Bayes-Nash equilibria for ﬁrst-
price single-unit auctions and mth-price multi-unit
auctions, when the auction has a set of possible
closing times, one of which is chosen randomly for
the auction to end at. To evaluate this approach
we used our analysis to generate strategies for the
International Trading Agent Competition. One of
these was evaluated as the best overall and was
subsequently used very successfully by our agent
WhiteBear in the 2005 competition.

1 Introduction

Auctions are becoming an increasingly popular method for
transacting business, both between individuals over the Inter-
net and between businesses and their suppliers. In this con-
text, auction theory provides us with some simple equilibria,
mostly for the case when a single item is being bought or
sold. However, in practice, agents (or humans) are rarely in-
terested in a single item. Rather, they often wish to bid in
several auctions in parallel for multiple goods. Moreover, the
fact that the value of each good to an agent often depends
on other goods makes this problem particularly hard. Given
this background, the International Trading Agent Competi-
tion (TAC) [Wellman et al., 2001] deﬁned a benchmark game
that incorporates several elements found in real marketplaces,
and different researchers adopted a variety of approaches to
tackle the problem (see e.g. [Stone et al., 2002] or [Green-
wald and Boyan, 2001]). Now, most of these approaches op-
erate based on some form of heuristics, because it is widely
claimed that a principled theoretic approach is not practical.
However, in [Vetsikas and Selman, 2003] we outline a gen-
eral, principled methodology for systematically exploring the
space of bidding strategies for complex games with multiple
interdependent goods, which are traded in several different
auctions, like TAC, where it is not possible to ﬁnd an equi-
librium solution. Speciﬁcally, to handle this complexity, we
decompose the problem into sub-parts, which are then an-
alyzed separately, before the various resulting strategies are
recombined to generate the strategy the agent should use.

Against this background, in this paper we actually compute
Bayes-Nash equilibria for some of these sub-problems and

then use them to generate new trading strategies. Even though
our general methodology is motivated from the fact that com-
plex games cannot be analyzed using the current game theo-
retic tools, by concentrating on one sub-problem, we can now
analyze it. In particular, we examine auctions that have a set
of possible closing times, one of which is chosen randomly
for the auction to end at, and compute several novel equilib-
ria. To evaluate our work we applied it to a sub-problem of
TAC, the purchase of a hotel room of a particular type. In
more detail, in TAC Classic, m = 16 rooms are available
in each category (meaning hotel and day) and they are sold
in separate, ascending, multi-unit, mth-price auctions (one
per category). These auctions close at randomly determined
times and, more speciﬁcally, a random auction will close ev-
ery minute throughout the game. The agents want to buy up
to 8 rooms, but for ease of analysis we assume that each such
agent is represented by 8 sub-agents, each of which is inter-
ested in a single room. In this way, we have N = 8 × 8 = 64
agents each wishing to buy 1 unit (room) in the auction. Be-
tween closing times, the agents may place bids, but these are
not opened until the next possible closing time; hence each
round that takes place between consecutive closing times is
effectively a sealed bid auction. The agents’ bids are binding,
as they cannot subsequently be retracted.1

This paper makes a number of contributions to the state of
the art. In section 2, we analyze the Bayes-Nash equilibria
that exist in mth-price auctions with multiple possible clos-
ing times and compute several equilibria that have not been
seen in the literature before.
In particular, the equilibrium
that we look for in each case is the unique symmetric equilib-
rium. Now, some of the initial stages of this work appeared
in [Vetsikas and Selman, 2006] where we presented equilib-
ria for the 2-round case, without any implementation details.
The current paper extends this very preliminary work by pre-

1As well as being a benchmark for the international competition,
there are also a number of real world auction settings that exhibit
these characteristics. The Yahoo! auctions have a “random” closing
time, since they are extended every time a new bid is placed. In ad-
dition governments sometimes conduct rounds of binding and non-
binding bids when privatizing resources (normally the ﬁrst rounds
consist of non-binding bids, and the latter rounds of binding ones).
As in TAC, after each round of binding bids, there is a chance that
the government will decide, for political or economic reasons, to
end the auction (well before the last possible closing time). Further-
more, in many countries, the spectrum auctions for third generation
cellular phones involved multiple rounds of bidding.

IJCAI-07

1543

2 Computing the Equilibria

g(ui) = ui −

senting equilibria (with proofs in most cases) for the general
multi-round case, as well as for the special case of a ﬁrst price
auction. In section 3, we describe the implementation of this
work to various cases, including the TAC game. Finally, in
section 4, we generate two new TAC strategies inspired by
this analysis, and we determine, via experiments, that one
of them is superior. We then used this strategy in the actual
competition (where the corresponding agent was highly suc-
cessful). We conclude this paper, in section 5, by detailing
interesting directions for future extensions of this work.

We assume that N risk-neutral agents wish to buy 1 unit of a
certain good each. An independent seller sells m units of the
desired good in an mth price auction. The agents have val-
uations (utilities) ur
i at round r which are i.i.d. drawn from
distribution Fr(u). Each agent knows accurately its own val-
i at the current round and all the distributions Fr(u).
uation ur
The probability that round r is the last round is known to be
pr. If more rounds exist, an agent can submit new bids as long
as they are greater or equal to the bid price from the end of the
previous round; this is the minimum bid allowed at round r
which is denoted as Qr. We make two different assumptions
about the information each agent i knows about its utility ur(cid:2)
i
(r

(cid:2) ≥ r) at the start of the round r:
• ur(cid:2)

i , and thus ur(cid:2)

i can be assumed to be relatively similar to the current
utility ur
i ; this is reasonable for TAC
because usually there is a correlation between the valua-
tion of the same room over the course of the game. This
assumption is used in theorems 3 and 5.

(cid:3) ur

i

• The more general case is when the agent only knows
is drawn from some distribution Gr(cid:2)(u). This
that ur(cid:2)
i
distribution could even be Gr(cid:2) (u) = Fr(cid:2)(u), when no
information whatsoever exists. We use this assumption
in theorem 6.

In addition, agents may not subtract bids.

In the TAC
game, when the valuation of a room drops below the bid price
Qr, it is an optimal behavior for the agent to place a bid equal
to Qr as late as possible, since in this way it might be lucky
enough to get rid of the room. If only k < m agents have
≥ Qr, the rest of the rooms are sold to (m − k)
utilities ur
i
winners of the round (r − 1), that no longer wish to buy; all
their bids are equal to Qr and the TAC rules state that the
(m − k) earliest placed such bids will get the rooms, there-
fore this means that a random selection of those winners will
get the rooms, as the order of their bid placements is random.
It should be noted that all the equilibria when p1 (cid:4)= 1 are
the solutions of differential equations of the form described
by theorem 1, which is taken from [Atkinson and Han, 2004].
Theorem 1 Let f (x, z) and ∂f (x,z)
be continuous functions
of x and z at all points (x, z) in some neighborhood of the
initial point (x0, Y0). Then there is a unique function Y (x)
deﬁned on some interval [x0 − α, x0 + β], satisfying:

∂z

(cid:2)(x) = f (x, Y (x)), ∀x : x0 − α ≤ x ≤ x0 + β and

Y
Y (x0) = Y0

2.1 Equilibria For A Single Unit Auction
In this section, m = 1 and the single unit is sold to the
agent which submitted the highest bid at a price equal to its
bid. In theorem 3, we assume that in the second round the
utilities are drawn from the same distribution as in the ﬁrst
(cid:3) ui. Each agent i submits a bid vi in
round, and that u
the ﬁrst round. We compute a Bayes-Nash equilibrium g(u)
that maps utilities ui to bids vi. In the case of p1 = 1 (only
one round) and Q1 = 0, we know from standard auction the-
ory that each risk-neutral agent i with valuation ui should bid:

2
i

(cid:4)

(cid:2)

ui
0

F1(ω)

(cid:3)
N −1 · dω

Theorem 2 If the starting price is Q1 ≥ 0 and the bidding
lasts for exactly 1 round (p1 = 1) the equilibrium strategy is

(cid:2)

1

F1(ui)

(cid:3)N −1 ·
(cid:2)
(cid:4)
(cid:2)

ui
Q1

(cid:3)
(cid:3)
N −1 · dω
N −1

F1(ω)
F1(ui)

g(ui) = ui −

(1)

Proof. Since Q1 > 0, (i) some agents might have stopped par-
ticipating in the auction, since the current price Q1 exceeds
their private valuation ui, and (ii) the probability distribution
of the valuations F1(u) has changed, since now we know that
the valuation of agents that still participate is ui ≥ Q1. The
new probability distribution is:

FQ1 (u) = F1(u)−F1(Q1)
1−F (Q1)

, if u ≥ Q1 & FQ1 (u) = 0, o.w.
(2)

We also know the probability πk of the event that exactly
k agents participate in the auction at price Q1; it is the proba-
bility that exactly (k − 1) of the other agents’ valuations2 ui
are ui ≥ Q1, which is (see e.g. [Rice, 1995]):
πk = C(N −1, k−1)·

1−F1(Q1)

F1(Q1)

N −k ·

(cid:2)

(cid:3)

(cid:2)

(cid:3)

k−1

(3)

(cid:5)(cid:6)

Let us assume that it is a Bayes-Nash equilibrium for each
agent i to bid vi = g(ui). If k agents participate then the
utility of agent i is 0, if it does not have the highest bid, and
(ui − vi), if it does. The expected utility of agent i when it
places a bid of vi (in the case of k agents) is:
EUi(vi|#agents = k) = (ui − vi) · P rob
(ui − vi) ·
Since vj = g(uj), it is P rob[vi ≥ vj] = FQ(g
Φ(x) =
number of agents participating is:
EUi(vi) =

(cid:8)
j(cid:3)=i P rob[vi ≥ vj].
(cid:3)
(cid:9)
k=1 πk · EUi(vi|#agents = k) ⇒
EUi(vi) = (ui − vi) · Φ(g

−1(vi)). Let
. The expected utility regardless of the

j(cid:3)=i vi ≥ vj

−1(vi))

F1(x)

N −1

(cid:2)

(cid:7)

(4)

=

N

dvi

The bid vi that maximizes EUi(vi) can be found by setting
dEUi(vi)

Since we assumed that the optimal solution is vi = g(ui), the
previous equation becomes:

= 0 ⇔ (ui − vi) · Φ(cid:2)(g−1(vi))
(cid:2)

(cid:3)

g(cid:2)(g−1(vi)) = Φ(g

−1(vi)).

1

ui − g(ui)

· Φ(cid:2)(ui) ·

= Φ(ui)

g(cid:2)(ui)
The solution of
for boundary condition
g(Q1) = Q1, is equation 1; this can be easily veriﬁed. (cid:2)

this equation,

This theorem guarantees the existence and uniqueness of the
equilibria we compute in the next sections.

2Because from the point of view of a participating agent it does

not know whether the other (N − 1) agents participate.

IJCAI-07

1544

It should be noted that this theorem is reminiscent of the
work in [McAfee and McMillan, 1987] concerning the equi-
librium solution in the case that the distribution F1(u) has a
minimum value vl, presented by equation 5 in that paper. In
fact the two equilibria are given by similar equations, where
the minimum valuation vl is substituted by the minimum al-
lowable bid Q1. However there are also some important dif-
ferences between theorem 2 and that work. In particular, in
the case examined by theorem 2, the number of agents partic-
ipating is not known a priori, because some of them may have
a private valuation ui which is smaller than the minimum al-
lowable bid Q1; this creates a fundamental difference com-
pared to the case examined by McAfee and McMillan where
there is a minimum valuation vl. Indeed, dealing with this un-
certainty concerning the number of bidders, which participate
in the auction, constitutes the core of the proof of theorem 2.
Theorem 3 If the starting price is Q1 = 0, a second round
of bidding exists with probability (1 − p1) (p1 (cid:4)= 0, 1) and
the utility of the agents in the second round is drawn from
the same distribution F2(u) = F1(u) as in the ﬁrst round
(and each agent i in fact has utility of a similar value to the
utility ui of the ﬁrst round) then the equilibrium strategy is
the solution of the differential equation:

(cid:3)

·

Φ(cid:2)(ui)
g(cid:2)(ui)

(cid:2)
(cid:2)

(cid:3)

(cid:3)

(5)

N −1

.

ui − g(ui)

= Φ(ui) · Ψ(g(ui))

(cid:2)

(cid:3)

where the boundary condition is g(0) = 0,
Φ(x) =

and Ψ(x) = 1 + 1−p1

F1(x)

N −1

·

F1(x)

p1

Proof. Due to space considerations we omit this proof. How-
ever it has similarities with the proof of theorem 5. (cid:2)

As a special case, we can examine this equation when only
N = 2 agents participate and their valuations ui ∼ U [0, 1],
which means that F1(u) = u, ∀u ∈ [0, 1]. Equation 5 be-
comes:

(cid:2)

(cid:2)

p

g

(ui) =

ui ·

ui − gp(ui)
1 + 1−p
p

· gp(ui)

(6)

In ﬁgure 1 (left), we graph the solution for various values
1−p
of
p . We provide this ﬁgure in order to contrast with the
Bayes-Nash equilibrium for the case that p = 1, which is
g1(ui) = ui
2 (see e.g. [Krishna, 2002]). One may notice that
as the probability (1 − p) of a second round increases, the
equilibrium strategy suggests that the agent should bid less.
In section 3, we compare these results with those produced
by our algorithm for solving the R-round case.

2.2 Equilibria For Multiple Round Auctions

(cid:2)
(cid:2)

(cid:9)
(cid:9)
m−1
i=0 C(N − 1, i) ·
m−2
i=0 C(N − 1, i) ·

In this section we present the system of equations for com-
puting the equilibria for the R-round auction (R ≥ 2).
Let us deﬁne Φr(x) and Yr(x) as follows:
Φr(x) =
Yr(x) =
In the short paper [Vetsikas and Selman, 2006],3 we give the
following theorem for the 1-round case:
Theorem 4 If the starting price is Q1 ≥ 0 and the bidding

1 − Fr(x)
1 − Fr(x)

N −1−i ·
N −1−i ·

Fr(x)
Fr(x)

(cid:3)
(cid:3)

(cid:2)
(cid:2)

(cid:3)
(cid:3)

i

i

(cid:10)

·

lasts for exactly 1 round (p1 = 1) the equilibrium strategy is

g(u) = u − e

R
u
Q1

−Y (cid:2)

1 (ω)

Φ1 (ω)−Y1 (ω)
Φ1(u) − Y1(u)

·dω

u

Φ1(z) − Y1(z)
R
z
Q1

Φ1(ω)−Y1 (ω)

1 (ω)

−Y (cid:2)

·dω

· dz

Q1

e

(7)
In the next proofs, we will use the following derivation from
the proof of theorem 4, without proving it here; that the ex-
pected utility, if the auction closes at this round r, is:

(r)
i

U

(vr
i

) = (ur
i

− vr
i

) · Φr(g

−1
r

(vi)) +

(cid:10)

r
v
i

Qr

Yr(g

−1
r

(ω)) · dω

(8)

Theorem 5 If the starting price of the current round r is
Qr ≥ 0, the next round of bidding (r + 1) exists with prob-
ability (1 − pr) (pr (cid:4)= 0, 1) and the utility of the agents in
round r is drawn from the distribution Fr(u) (and each agent
i in fact has utility ur
i of a similar value to the utility ui of the
ﬁrst round) then the equilibrium strategy is the solution of the
differential equation:
(ui)
(ui)

Φr(ui) − Yr(ui)

· Ψr(ui, gr(ui))

ui − gr(ui)

(cid:2)

(cid:3)

(cid:2)

(cid:3)

=

Φ(cid:2)
r
g(cid:2)
r

·

,

pr

∂x

· ∂Ur+1(u,x)

where Ψr(u, x) = 1 − 1−pr
and Ur+1(ui, Qr+1) is the expected utility at round (r + 1),
when the agent’s utility is ui and the starting price is Qr+1.
The boundary condition is g(Qr) = Qr.
In addition, the expected utility at round r given this strategy
gr(ui) is then:
Ur(ui, Qr) =
pr ·
+(1 − pr) ·

(cid:4)
Qr Yr(ω) · g
(cid:11)

(ui − gr(ui)) · Φr(ui) +

Ur+1(ui, gr(ω)) · Y

(ω) · dω

(ω) · dω

(cid:12)

(cid:12)

(cid:11)

ui
Qr

(10)

(cid:2)
r

(cid:2)
r

ui

(9)

+Ur+1(ui, gr(ui)) ·
+

g−1
r (ui)
ui

Ur+1(ui, gr(ω)) · Φ(cid:2)

(ω) · dω

r

Φr(ui) − Yr(ui)

(cid:12)

(cid:11)(cid:4)
(cid:4)

(m−1)

Proof. If the auction closes at the ﬁrst round, then the ex-
pected utility is given by equation 8. To compute the expected
utility from the other rounds, we need to examine the value of
Qr+1, which depends on the bids placed in the current round.
The probability distribution of the (m − 1)th and mth highest
bids among all other agents at this round, named respectively
−1(v))
B
and P rob[B
≥ B
> vr
If B
then the agent submitted the mth price, so Qr+1 = vr
vr
i
Note that P rob[Qr+1 = vr
P rob[B

(m) (cid:3) v] = Φr(g
i , then Qr+1 = B

, then Qr+1 = B
] =

(m−1) (cid:3) v] = Yr(g

, are P rob[B

−1(v)).
(m)

(m)] = Φr(g

)) − Yr(g

,
i . If

> vr
i

and B

≥ B

≥ B

(m−1)

(m−1)

(m−1)

(m−1)

. If B

)).

(m)

(m)

(m)

.

i

−1
r

(vr
i

−1
r

(vr
i

> vr
i

As a result, we can now compute the expected utility from the
rest of the rounds U

∗
i as follows:

U

∗
i

=

ui
Qr

Ur+1(ui, ω) · P rob[Qr+1 = ω] · dω ⇒

(cid:4)

U

∗
i

=

(cid:10)
(cid:10)

r
v
i

Qr

ui

vr
i

+Ur+1(ui, vr

(cid:11)

Ur+1(ui, ω) · d
dω
Φr(g
Ur+1(ui, ω) · d
dω

) ·

i

Yr(g
−1
r

(vr
i

−1
r

(ω)) · dω

)) − Yr(g

−1
r

(vr
i

(11)

(cid:12)

))

Φr(g

−1
r

(ω)) · dω

3This proof and other details that have been omitted from this

paper may also be found at Dr. Vetsikas’ thesis.[Vetsikas, 2005]

+

IJCAI-07

1545

)
u
(
g

 
:

d
b

i

0.45

0.4

0.35

0.3

0.25

0.2

0.15

0.1

0.05

0

0

(1−p)/p = 1

(1−p)/p = 2

(1−p)/p = 5

(1−p)/p = 10

(1−p)/p = 20

)

,

Q
u
(
1
g

 
:

d
b

i

1000

800

600

400

200

0
1000

0.2

0.4

0.6

0.8

1

utility: u

500

starting price: Q

0

0

200

600

400

utility: u

1000

800

Figure 1: Equilibrium strategies for case N = 2, m = 1 and utility drawn from uniform distribution U [0, 1], (left) using
equation 6 for the case when R = 2 rounds exist, and Q1 = 0, and (right) using the algorithm of ﬁgure 2 for the 1st round of 8
and probabilities pr equal to those of TAC.

The expected utility for both rounds is:

(vr
i

EU r
i

) = pr · U

(r)
i
The bid vi that maximizes EU r
i
= 0. Then we set vr
dEU
i

i (v

i )

r

r

dvr
i

∗
i

+ (1 − pr) · U
(12)
(vr
) can be found by setting
i
= gr(ui) and eventually we

derive the differential equation 9.
If ui = Qr then the agent must bid vr
boundary condition.
From equations 11 and 12, by substituting vr
i
derive equation 10. (cid:2)

i

= Qr, hence the

= gr(ui), we

(cid:2)

In the following theorem the utility in the later rounds is
assumed not to be precisely known and to be drawn from dis-
tribution Gr(u).
Theorem 6 If the starting price of the current round r is
Qr ≥ 0, the next round of bidding (r+1) exists with probabil-
ity (1−pr) (pr (cid:4)= 0, 1), and the utility of the agents in round r
is drawn from the distribution Fr(u) (and each agent i knows
more accurately that, in fact, its utility ur
i is drawn from dis-
tribution Gr(u)), then the equilibrium strategy gr(ur
i , Qr) is
the solution of the differential equation:

ur
i

− gr(ur

i , Qr) +

· U r
L

(gr(ur

i , Qr))

·

1 − pr

pr

(cid:3)

(cid:3)
((cid:13)

· Ψr(gr(ur

i , Qr))
U r+1(x) + U r+1

L

Φ(cid:2)
r

(ui)
i ,Qr)

∂gr(ur
∂ur
i

=

(13)

(x)) and

Φr(ur

i

) − Yr(ur

i

)

where Ψr(x) = 1 − 1−pr

(cid:15)

pr

m−1(cid:14)
(cid:2)

k=0

· d
dx
N · (m − k)
m · (N − k)
k ·

(cid:3)

(cid:10)

U r+1

L

(x) = −

(cid:2)

Fr+1(x)

N −1−k ·

1 − Fr+1(x)

(cid:16)

· C(N − 1, k)·

x

0

Gr+1(ω) · dω

(cid:2)

(cid:3)

(cid:2)
r

(cid:12)

(cid:12)

+(cid:13)
(cid:10)

ur
i

U r+1(gr(ur
g−1
i ,Qr)
r (u

r

(cid:13)

utility is ur
gr(ur

i , Qr) has been computed it is:

i and the starting price is Qr and given that

Ur(ur

i , Qr) = (1 − pr) ·

U r+1(gr(ω, Qr)) · Y

(ω) · dω

(cid:11)(cid:10)

(cid:13)
(cid:11)

r
u
i

Qr

i , Qr)) ·

Φr(ur

i

) − Yr(ur

i

)

(15)

(cid:11)

+pr·

+

(ur
i

U r+1(gr(ω, Qr)) · Φ(cid:2)

(ω) · dω

r

(cid:10)

(cid:12)

−gr(ur

i , Qr))·Φr(ur

i

)+

r
u
i

Yr(ω)·g

(cid:2)
r

(ω, Qr)·dω

Qr

Proof. Due to space limitations and because the proof of this
theorem shares a number of common steps with the proof of
theorem 5, we will give a sketch of the proof. One should
notice that equation 15 is derived in almost the same way
as equation 10. However since the utility ur
i in round r is
not precisely known, and is drawn from distribution Gr(u),
we must use equation 14 in order to compute the expected
utility at a round r, based on all posible utility values. The
other important difference between the two proofs, is that we
must also compute the expected gain of utility (actually it’s
negative, so it’s a loss) U r+1
(Qr+1) if the agent is a win-
ner in the round r and in the next round (r + 1) its utility
is ur+1
i < Qr+1. Initially we compute the utility difference
U r+1
U r+1

, Qr+1), and then it is

(ur+1

(Qr+1) =(cid:4)

L

L

L

i

Qr+1
0

U r+1

L

(ur+1

i

, Qr+1)· P rob[ur+1

i

= ω]· dω

The ﬁnal equation for U r+1
U r+1

(Qr+1) =

L

(Qr+1) is:

L

m−1(cid:14)

(cid:15)

−

N · (m − k)
m · (N − k)

(cid:2)

(cid:2)
(cid:10)

(cid:3)

· C(N − 1, k) ·

Fr+1(Qr+1)

1−Fr+1(Qr+1)

k ·

0

Qr+1

Gr+1(ω)·dω

(cid:3)

N −1−k·

(cid:16)

and the expected utility at round r when ur

i is drawn from

Gr(u) is:(cid:13)

U r(Qr) =

(cid:10) +∞

Qr

Ur(ω, Qr) · d
dω

Gr(ω) · dω

(14)

k=0

The boundary condition is g(ur
Ur(ur

= Qr.
i , Qr) is the expected utility at round r, when the agent’s

i , Qr) = Qr, when ur

i

The rest of the proof proceeds along the same lines as the
proof of theorem 5. (cid:2)

IJCAI-07

1546

Set UR+1(u, Q) = 0, ∀u, Q
for r = R to 1 do

· ∂
∂Q

pr

∀u, Q set Ψr(u, Q) = 1 − 1−pr
∀Q compute gr(u, Q) by solving Differential Eq. 9
∀u, Q compute Ur(u, Qr) using equation 10

Ur+1(u, Q)

end for

Figure 2: Algorithm for solving the system of Theorem 5.

3 Implementation

Figure 2 provides the algorithm that we used in order to com-
pute the equilibrium described by theorem 5 using Matlab.
At each round r, starting from the last round (R), the equi-
librium strategy and expected utility from round (r + 1) are
used to compute the equilibrium strategy for round r, using
the equations of theorem 5. To solve equation 9, we used the
differential equation solver ode45. R is set to R = 8 rounds
in all cases, since TAC hotel auctions can have up to 8 rounds.
Initially we computed the equilibria for a uniform distribu-
tion. The simplest case is when N = 2 agents are buying
m = 1 items; this case was used in order to compare the re-
sults of the algorithm with the known solution as shown in
ﬁgure 1. We only present the equilibrium strategy for the ﬁrst
round of 8 rounds here in ﬁgure 1 (right); the solutions of
all the other rounds have similar graphs with different curva-
tures. One notices that in earlier rounds the agent bids less
than in the later rounds as was expected. By comparing ﬁg-
ure 1 (left) to the solution for the 7th round, we verify that
they are identical for the case that the current price Q = 0.
However we observed that the solution at each round is very
similar to the solution that we would get if, instead of sev-
eral later rounds (with probability (1 − p) that the auction
will close later), we only have one possible later round (again
with probability (1 − p) that the auction does not close at this
round, but at the next one). This indicates that, from the point-
of view of the agent, the number of possible rounds does not
matter, as long as the probability of having more rounds is
the same. For example, the equilibrium strategies for all the
rounds are almost identical to the one presented in ﬁgure 1
(left) when Q = 0. This would mean that we only need to
solve one differential equation instead of a system when the
utility distribution is the same in every round.

Still using a uniform distribution, we computed the equi-
libria when N = 64 agents are buying m = 16 items; this
uses the correct number of agents and items for a real TAC
scenario.
In every round the equilibrium strategy is to bid
closer to each agent’s utility; that is 94% or more in round
1 and almost 100% in the last round. This happens because
of the fact that many more agents participate, compared to the
number of items offered. In this case, the agent makes a proﬁt
by the fact that its bid is likely not to be the mth price, and
thus, usually pays less than its actual bid, if it wins.

Finally, we computed the equilibria using an experiment
derived distribution. Since our stated goal was to apply these
equilibria to a TAC agent in order to generate more candidate
strategies, we collected the utilities of the hotel rooms from
a large number of actual games and used these to create the
distributions Fr(u) and Gr(u). The cdf of the distribution
Fr(u) that we used is presented in ﬁgure 3. We make sure that

1

0.9

0.8

0.7

)
u
(
F

 
:
f

d
c

0.6

0.5

0.4

0.3

0.2

0.1

0

r=1
r=2
r=3
r=4
r=5
r=6
r=7
r=8

200

400

600

800

1000

utility: u

Figure 3: Experimental distribution Fr(u), which is used to
generate the strategies for our TAC agent.

these functions and their derivatives are continuous, so that
we can apply ode45 and guarantee uniqueness. To do this, we
group all the samples in buckets of size 2, and then to make
it continuous, we expand each bucket to a normal distribution
with σ = 2 and center μ equal to the center of the bucket;
this is the most common way, which is used in statistics, for
turning sampled discrete distributions into continuous ones.
In ﬁgure 4, we present the equilibrium strategy for rounds 1,
5 and 8. The fact that the utility distribution Fr(u) is different
in every round causes the bid function to vary signiﬁcantly
between different rounds. In the later rounds, it is advisable
to bid close to the marginal utility ui that the agent gets if it
buys a unit of the commodity sold in the auction, whereas in
the early rounds, it is preferable to bid closer to the current
price Q of the auction.

We also computed the equilibrium strategies described by
theorem 6. We set the distribution of the later rounds Gr(u)
to be equal to Gr(u) = Fr(u|u ≥ ur−1), which means that
we disregard any value of u that is smaller than the utility
ur−1 in the previous round; this is reasonable for TAC, since
utilities rarely decrease between rounds. We only need to add
one step to the algorithm of ﬁgure 2 in order to implement
this: before ﬁnishing each iteration, we add a step (see equa-
tion 14) in order to compute the utility of this round when the
i is only known to be drawn from distribution Gr(u).
utility ur
Even though, due to space limitations, we can’t show any ﬁg-
ures of the equilibrium strategies, they all have the same gen-
eral form as the strategies generated by theorem 5. However,
for any values of the valuation u and starting price Q and at
every round r these strategies bid less than the correspond-
ing strategies given by theorem 5; this is something that we
expected, because of the form of distribution Gr(u), which
only allows for higher than the current utility ur
i .

4 Strategy Generation and Experiments

Each candidate strategy for the hotel auctions determines the
prices offered in each round; they are differentiated by how
aggressively the agent bids. In [Vetsikas and Selman, 2003],
we present three strategies. Two of them are the boundary
strategies, that is the lowest and highest possible prices re-
spectively, that a rational agent would ever consider bidding
at:

IJCAI-07

1547

)

,

Q
u
(
1
g

 
:

d
b

i

1000

800

600

400

200

0
1000

)

,

Q
u
(
5
g

 
:

d
b

i

1000

800

600

400

200

0
1000

)

,

Q
u
(
8
g

 
:

d
b

i

1000

800

600

400

200

0
1000

500

starting price: Q

0

0

200

600

400

utility: u

1000

800

500

starting price: Q

0

0

200

600

400

utility: u

1000

800

500

starting price: Q

0

0

200

600

400

utility: u

1000

800

Figure 4: The equilibrium strategies g1(u, Q), g5(u, Q) and g8(u, Q), are presented (from left to right), for rounds 1, 5 and 8
respectively. These strategies are generated for the experimental distribution Fr(u) when N = 64 and m = 16. It should be
noted that when ur ≤ Qr (left half of each diagram), the agent should bid ur, but this bid will be rejected by the auction.

0.165

0.16

0.155

0.15

0.145

0.14

0.135

0.13

y
t
i
l
i
t

 

U
d
e

t
c
e
p
x
E

Single−round strategy (S vs S)
Single−round strategy (S vs T)
Two−round strategy (S vs T)
Two−round strategy (T vs T)

0.1

0.2

0.3

0.4

0.5

0.6

0.7

0.8

0.9

Probability p (of auction ending after one round)

Figure 5: Expected utilities for a game, where N = 2 agents
participate and m = 1 item is sold, for all possible combi-
nations of agents. The agents use either (i) the single-round
(S) equilibrium strategy g(ui) = ui
2 , or (ii) the two-round (T)
equilibrium strategy described by equation 6.

(i) the L(owest aggressiveness) strategy is to bid reasonably
close to the current bid price Q of the auction, which is the
lowest price that one can offer for its bid to be valid, and
(ii) the H(ighest aggressiveness) strategy is to bid progres-
sively closer to the actual (marginal) utility it has for the item,
which is the highest price that a rational agent should bid at
if it doesn’t wish to lose money.

Then we must generate a number of intermediate strate-
gies, which would bid between the lowest and highest rea-
sonable prices (these are the bids of the boundary strategies)
at each instance. In [Vetsikas and Selman, 2003], we pro-
posed one such strategy which worked very well in practice
(iii) the M(oderate aggressiveness) strategy, which combines
the behaviour of the boundary strategies (L and H) depending
on the marginal utility of the desired good: if the marginal
utility is low, then it bids similarly to the L strategy, whereas
if it is high, it bids similarly to the H strategy.

In this paper we expand this methodology to use strategies

based on the equilibria presented in section 2.2:
(iv) the actual E(quilibrium) strategy gr(u, Q), which was
computed in section 3 by applying the equations of theorem
5 for the TAC (experiment derived) distribution, is used.

However, the basic premise for generating this equilibrium
was that each agent is interested in maximizing its own proﬁt.
In contrast, in a competition, like TAC, the actual goal of
each agent is to beat the competition; that is, maximize the
difference of its proﬁt to that of the other agents, rather than
to just maximize its proﬁt. This change can have a signiﬁcant
impact on the equilibrium strategy. To explore this issue we
looked at the single item (m = 1) ﬁrst price auction with
N = 2 agents and R = 2 rounds when the valuations are
drawn from uniform distribution U [0, 1].

The equilibrium strategy for a (S)ingle round is g(ui) =
ui
2 , and for (T)wo rounds is given by equation 6. Figure 5
presents the expected utilities in all possible combinations of
the two agents for varying values of the probability p of the
auction closing after the ﬁrst round. We observe that, when
only the S strategy is used, the scores are the lowest, whereas
when only the T strategy is used, the scores are highest. How-
ever, when the two agents use different strategies, one uses S
and the other T, the S strategy usually performs better than
the T strategy. This veriﬁes that in a competition the more
aggressive S strategy, which bids higher than T, would win,
whereas if we care only about maximizing proﬁt, the S strat-
egy is dominated by the T strategy; we expected this since T
is an equilibrium strategy for the two-round auction.

We also computed the equilibrium strategy for the “com-
petition objective function” (that is to maximize the differ-
ence of proﬁt rather than the actual proﬁt). This strategy
would beat the g(ui) = ui
2 strategy in direct competition for
a single-round auction: its expected utility is 0.136 vs 0.125.4
Theorem 7 If we care about maximizing the difference in
proﬁt from the opponent, then the Bayes-Nash equilibrium
strategy for the ﬁrst-price, single-unit, single-round auction
when two agents participate with i.i.d. utilities drawn from
the uniform distribution U [0, 1] is g

∗(ui) = 2

3 · ui

4In [Brandt et al., 2007] the authors present an analysis of the
equilibria that exist in 1st and 2nd price sealed bid auctions, for a
variety of objective functions (i.e. for varying signiﬁcance of the
effect that the opponents’ gain has on the agent’s utility). In [Vet-
sikas and Jennings, 2007], we extend these results and present the
equilibria for multi-unit auctions, i.e. the mth and (m + 1)th price
sealed bid auctions. We prove that, in some cases, the agent should
increase signiﬁcantly its bid if it wishes to outperform its competi-
tion; this can lead to bidding more than its true valuation even in an
mth price auction.

IJCAI-07

1548

This demonstrates that the E strategy’s bids are lower than
they should be in order to beat the opponents. By looking at
the form of gr(u, Q) in all rounds (see ﬁgure 4), we observe
that, at round 1 the bids are a bit higher than the current price
Q, at round 8 closer to the marginal utility, and in the interme-
diate rounds, the bids are approximately equal to a weighted
sum of the values provided by these extreme strategies with
the weight equal to the probability pr of the current round r
being the one when the auction closes. Since the problem of
the E strategy are these bid levels, we modify it:
(v) the P strategy, which uses the boundary strategies L and H
(rather than E) as the strategies that give the two extreme val-
ues (low and high), and mixes these values in the same way
as E, namely by placing bids at a price equal to the weighted
sum of those bids with weights pr and (1 − pr) respectively.
We would like to point out that bidding more aggressively,
i.e. higher, than suggested by the strategies we present in this
paper, is actually going to produce inferior results, even in the
case that the agent is interested in outperforming the compe-
tition. The reason for this is that, if the agent bids higher
than that point, it will end up paying too much for whatever
it buys, and this amount will be higher than the beneﬁt from
the opportunities, which are stolen from its competitors.

We now have 3 intermediate strategies to test, in addition
to the two boundary ones. According to our methodology, we
must organize a tournament among the intermediate strate-
gies in order to determine the best strategy, as we should
not use more than two of the agents employing intermediate
strategies. The rest of the agents use the boundary strategies
and the number is varied, so that the whole spectrum of pos-
sible strategic combinations might be explored. To determine
which is the best strategy we use paired t tests5 on the scores
of the agents; and, generally, we consider scores to be statis-
tically signiﬁcant if the test is below 5% (and deﬁnitely less
than 10% in a small number of cases only).6 In the ﬁrst phase,
we use intermediate strategies M and E. The results are pre-
sented in table 1. The M agents outperform the E agents by a
small margin (about 2.5%). This is mainly due to the fact that
in competition there is a different objective than simply max-
imizing one’s proﬁt, as we have demonstrated earlier in this
section. Note that the difference between the M and H agents
is not quite statistically signiﬁcant, but, with more experi-
ments, it probably would be and thus is denoted by (cid:4)?.7 This
is not important, however, as we found out what we wanted
from this phase, namely that we should promote the M agent

5This test was used in similar work, e.g. [Stone et al., 2002], to

evaluate performance differences between agents.

6To make this more precise, let us consider the ﬁrst experiment
in table 1 where the average score difference between the L and M
agents is 1%. There are two M and four L agents participating in
that experiment, with average scores 3359 and 3364 for each of the
individual M agents and 3326, 3327, 3322 and 3335 for each of the
L agents. We calculate p-values for all eight possible pairings of M
with L agents. Six of these p-values are between 2% and 5% (all of
them except for the values of the L agent with average score 3335 to
both the M agents). These last two p-values are 6% and 9%. Based
on our criteria, we consider this to be an indication of statistically
different scores.

7The p-values, in this case, for all eight agent combinations that
we examine, range from 3% to 16%, so it does not meet our stated
criteria for statistical signiﬁcance.

Average Scores

Stat. Signiﬁcant Diff.?

#H agents E M L

H L / M M / H L / H

0 (600) 3292 3361 3327 N/A (cid:4)
2 (599) 3240 3323 3264 3339 (cid:4)
4 (626) 2954 3046 N/A 3011

×
(cid:4)?

(cid:4)

Table 1: Scores for agents of low (L), moderate (M) and high
(H) bidding aggressiveness, as well as the equilibrium (E)
agent, as the number of aggressive agents participating in-
creases. In each experiment, we use two E and two M agents.
(cid:4)indicates statistically signiﬁcant difference in the scores of
the selected agents, and × statistically similar scores. (In par-
entesis we give the number of games ran for each experiment)

Average Scores

Stat. Signiﬁcant Diff.?

P M L

#H agents
0 (545) 3403 3417 3373 N/A ×
2 (573) 3275 3242 3235 3241 ×?
4 (603) 2999 2981 N/A 3006 ×

×
×

×?
×

H P / M M / H P / H

Table 2: Scores for agents of low (L), moderate (M) and high
(H) bidding aggressiveness as well as the P agent, as the num-
ber of aggressive agents participating increases. In each ex-
periment, two P and two M agents participate.

to the next phase of the tournament. Thus, in the last phase,
we use intermediate strategies M and P. The results are pre-
sented in table 2. Here the M and the P agents outperform
the L agents. The other agents perform reasonably similarly
between themselves, and, in fact, the performances were sta-
tistically similar for most cases (as denoted in the table). The
only exceptions to this rule were the performance of the P
agents (about +1%) as opposed to that of the M and H agents
in the case that two agents of each type participated. Based on
this, and empirical data from the early rounds of TAC 2005,
we decided that the P agent is performing best, which is the
reason it was chosen as the strategy we used in most of the
seeding round and the ﬁnals of TAC 2005.

Strategy M was used as our TAC entry since the semi-ﬁnals
of TAC 2002 thru the ﬁnals of TAC 2004. In 2005 we used
the P strategy mainly. The performance in the seeding, semi-
ﬁnal and ﬁnal rounds of TAC show this (in parenthesis we
give the difference from the top competing agent):
2002: Semi-ﬁnal 1st (+0.55%), Final 1st (+1.85%).
2003: Seeding 1st (+1.63%), Semi-ﬁnal 1st (+5.37%),

2004: Seeding 1st (+3.12%), Semi-ﬁnal 1st (+6.57%),

Final 3rd (−1.81%).

Final 1st (+7.10%).

2005: Seeding 1st (+2.63%), Semi-ﬁnal 1st (+1.61%),

Final 2nd (−0.50%).

Throughout this time, our agent has consistently achieved
the highest scores in the competition.
In 2004 our agent
was ﬁrst in all rounds with statistically signiﬁcant differ-
ences in the scores, which has never happened before or since
in TAC Classic.
In 2005 the top three ﬁnalists Mertacor,
WhiteBear05, and Walverine were very close to each other.
The reason for this extremely competent performance by all
agents seems to have been (at least partly) the fact that the
other two top scoring agents adopted some of our techniques;
in particular, the founding principle of our methodology that
trading commodities should be based entirely on maximiz-

IJCAI-07

1549

ing the agent’s utility. Walverine used this especially in re-
designing their procurement of entertainment tickets. More-
over, the Walverine team also used an experimental method-
ology [Reeves et al., 2005] which is probably the closest ap-
proach to the one we outlined in [Vetsikas and Selman, 2003].
However, no one else thought that it was feasible to look for
an equilibrium strategy, even for a sub-problem of a large
problem like TAC, and thus our approach as outlined in this
paper is truly unique.

5 Conclusions and Future Work

This paper analyzed auctions that have a set of possible clos-
ing times, one of which is chosen randomly for the auction to
end at. These auctions can be decomposed into one or more
rounds, each of which is deﬁned by the interval between pos-
sible closing times, and during which the auction is treated as
sealed bid. Speciﬁcally, we analyzed the Bayes-Nash equilib-
ria that exist in such cases and computed several novel solu-
tions for these auctions. In so doing, we deal with the tradeoff
that exists in this case, namely the price offered in the agent’s
bids. We also explained how to apply these results in the de-
sign of a TAC agent; we generated two new trading strategies
(E and P) based on the form of the equilibria we computed,
one of which (P) was successfully used in our top-scoring
agent during the 2005 competition.

We are currently working towards generating equilibria for
multi-demand auctions; this would allow us to remove the
current restriction that each agent must bid for a single item.
While this improvement is not expected to change the results
of our analysis for the TAC game signiﬁcantly,8 success in
this endeavor will lead to a more generally applicable result,
which is important for a wide range of game theoretic situa-
tions.

We are also working on recomputing the equilibria for
the “competition objective function”, namely when the agent
wishes both to maximize its own proﬁt and minimize that of
its opponents, which is more realistic for a competition set-
ting. We have been able to generate equilibria for the mth and
(m+1)th price auctions with one round of bidding for a range
of objective functions. We plan to incorporate this work in the
analysis presented in this paper in order to generate strategies
that are more appropriate to a competition setting like TAC.

Acknowledgements

We would like to thank prof. Robin Mason at the University
of Southampton, and prof. Steven H. Strogatz at Cornell Uni-
versity, as well as the reviewers of this paper, for comments
on this work.

Most of this research was undertaken as part of the ﬁrst au-
thor’s thesis. The latter parts, as well as ongoing related work,

8The reason why this happens is as follows. Our analysis shows
that the top bid of each agent is the same under both approaches
and the other bids, from highest to lowest, are affected progressively
more. This means that the bids for the top-valued three or four rooms
are not affected (the top one) or are affected relatively little. As these
are the highest bids placed by the agents, they are the ones likely to
affect the closing price of the auction; the rest are for rooms with
minimal marginal utilities, as observed in the simulations, and thus
cannot in practice affect the ﬁnal result.

is undertaken as part of the ALADDIN (Autonomous Learn-
ing Agents for Decentralised Data and Information Systems)
project, which is jointly funded by a BAE Systems and EP-
SRC (Engineering and Physical Research Council) strategic
partnership (EP/C548051/1).

References
[Atkinson and Han, 2004] Kendall Atkinson and Weimin
Han. Elementary Numerical Analysis. John Wiley & Sons
Inc., 2004.

[Brandt et al., 2007] F. Brandt,

and
Y. Shoham.
Spiteful bidding in sealed-bid auctions.
In Proc of the 20th International Joint Conference on
Artiﬁcial Intelligence, 2007.

T.

Sandholm,

[Greenwald and Boyan, 2001] Greenwald and Boyan. Bid
determination for simultaneous auctions. In EC-01, Oc-
tober 2001.

[Krishna, 2002] Vijay Krishna. Auction theory. Academic

Press, 2002.

[McAfee and McMillan, 1987] R. Preston McAfee and John
McMillan. Auctions and bidding. Journal of Economic
Literature, 25:699–738, June 1987.

[Reeves et al., 2005] D. M. Reeves, K. M. Lochner,
S. Cheng, and R. Suri. Approximate strategic reasoning
through hierarchical reduction of large symmetric games.
In AAAI-05, July 2005.

[Rice, 1995] John A. Rice. Mathematical Statistics and Data

Analysis. Duxbury Press, California, 1995.

[Stone et al., 2002] P. Stone, R. Schapire, M. Littman,
J. Csirik, and D. McAllester. ATTac-2001: A learning,
autonomous bidding agent. In AMEC IV. LNCS, vol. 2531.
Springer Verlag, 2002.

[Vetsikas and Jennings, 2007] I. A. Vetsikas and N. R. Jen-
nings. Outperforming the competition in multi-unit sealed
bid auctions. In (forthcoming), 2007.

[Vetsikas and Selman, 2003] I. A. Vetsikas and B. Selman.
A principled study of the design tradeoffs for autonomous
trading agents.
In Proceedings of the 2nd International
Joint Conference on Autonomous Agents and Multi-Agent
Systems, pages 473–480, 2003.

[Vetsikas and Selman, 2006] I. A. Vetsikas and B. Selman.
Bayes-Nash equilibria for m-th price auctions with multi-
ple closing times. In SigEcom Exchanges, 2006.

[Vetsikas, 2005] Ioannis A. Vetsikas. A principled methodol-
ogy for the design of autonomous trading agents with com-
binatorial preferences in the presense of tradeoffs. PhD
thesis, Cornell University, August 2005.

[Wellman et al., 2001] M. P. Wellman, P. R. Wurman,
K. O’Malley, R. Bangera, S. Lin, D. Reeves, and W. E.
Walsh. Designing the market game for TAC. IEEE Inter-
net Computing, April, 2001.

IJCAI-07

1550

